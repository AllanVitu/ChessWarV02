import{d as W,j as X,k as ze,E as Y,o,T as Se,c as n,l as L,b as e,t as l,G as E,h as w,i as c,H as Pe,I as $e,w as h,J as xe,K as Ce,f as Me,a as z,r as i,F as r,u as g,R as x,g as C,y as M,L as O}from"./index-vPvGcPAP.js";import{_ as Le}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CrY_gPxS.js";import{b as Be,g as De}from"./profileAnalysis-D7ewrLEi.js";import"./brand-icon-BJNb36kE.js";const Ne={key:0,class:"app-modal",role:"dialog","aria-modal":"true"},Ve={class:"app-modal__card"},je={class:"app-modal__header"},Ae={class:"app-modal__title"},Ie={class:"app-modal__body"},Re={key:0,class:"app-modal__footer"},Te=W({__name:"AppModal",props:{modelValue:{type:Boolean},title:{}},emits:["update:modelValue"],setup(j,{emit:u}){const S=j,B=u,p=()=>{B("update:modelValue",!1)},f=v=>{v.key==="Escape"&&p()};return X(()=>{window.addEventListener("keydown",f)}),ze(()=>{window.removeEventListener("keydown",f)}),(v,A)=>(o(),Y(Se,{to:"body"},[S.modelValue?(o(),n("div",Ne,[e("div",{class:"app-modal__backdrop",onClick:p}),e("div",Ve,[e("header",je,[e("h2",Ae,l(S.title),1),e("button",{class:"icon-button",type:"button","aria-label":"Fermer",onClick:p},"x")]),e("div",Ie,[E(v.$slots,"default")]),v.$slots.footer?(o(),n("footer",Re,[E(v.$slots,"footer")])):L("",!0)])])):L("",!0)]))}}),Ke={class:"onboarding-list"},qe={class:"onboarding-step__title"},Fe={class:"onboarding-step__text"},Ee={class:"content-grid"},Oe={class:"left-column"},Ge={class:"panel hero-card reveal"},Je={class:"hero-header"},He={class:"hero-actions"},Qe={class:"hero-body"},Ue={class:"board","aria-hidden":"true"},We={class:"hero-metrics"},Xe={class:"metric-label"},Ye={class:"metric-value"},Ze={class:"metric-note"},et={class:"engine-card"},tt={class:"engine-bars"},st={class:"stats-grid"},lt={class:"stat-label"},at={class:"stat-value"},ot={class:"stat-meta"},nt={class:"stat-change"},it={class:"stat-detail"},rt={class:"panel trend-card reveal delay-2"},dt={class:"trend-chart",viewBox:"0 0 520 180","aria-hidden":"true"},ct=["d"],ut=["d"],pt={class:"trend-footer"},vt={class:"trend-label"},ht={class:"trend-value"},_t={class:"trend-note"},mt={class:"panel table-card reveal delay-3"},bt={class:"table-wrap"},gt={class:"right-column"},ft={class:"panel rating-card reveal"},yt={class:"rating-header"},kt={class:"rating-meta"},wt={class:"rating-ring"},zt={class:"ring-center"},St={class:"ring-score"},Pt={class:"rating-footer"},$t={class:"metric-value"},xt={class:"panel reveal delay-1"},Ct={class:"onboarding-list"},Mt={class:"checklist-row"},Lt={class:"onboarding-step__title"},Bt={class:"card-actions"},Dt=["onClick"],Nt={class:"panel reveal delay-2"},Vt={class:"panel-header"},jt={class:"panel-title"},At={class:"panel-sub"},It={class:"card-actions"},Rt=["disabled"],Tt={class:"panel reveal delay-3"},Kt={class:"panel-header"},qt={class:"panel-title"},Ft={class:"panel-sub"},Et={key:0,class:"empty-state__subtitle"},Ot={class:"panel focus-card reveal delay-1"},Gt={class:"progress-list"},Jt={class:"progress-labels"},Ht={class:"progress-bar"},Qt={class:"panel session-card reveal delay-2"},Ut={class:"session-list"},Wt={class:"session-title"},Xt={class:"session-time"},Yt={class:"session-length"},Zt={class:"panel leaderboard-card reveal delay-3"},es={class:"leaderboard-list"},ts={class:"leaderboard-user"},ss={class:"leaderboard-avatar"},ls={class:"leaderboard-name"},as={class:"leaderboard-meta"},os={class:"leaderboard-delta"},G="warchess.onboarding.dismissed",J="warchess.checklist.completed",H="warchess.daily.completed",Q="warchess.daily.puzzle",U="warchess.resume.checked",ns="f7",us=W({__name:"HomeView",setup(j){const u=w(null),S=Me(),B={id:"",name:"Invite",title:"",rating:0,motto:"",location:"",lastSeen:"",email:"",avatarUrl:""},p=c(()=>u.value?.profile??B),f=c(()=>u.value?.games??[]),v=c(()=>u.value?.goals??[]),A=c(()=>u.value?`Bonjour, ${u.value.profile.name}`:"Bonjour"),Z=c(()=>u.value?.profile.motto??"Analyse en cours."),_=w(!1),ee=[{title:"Choisir un mode",text:"Local, invite ou match classe pour trouver le bon rythme."},{title:"Jouer la partie",text:"Lancez un duel rapide et suivez les coups en direct."},{title:"Analyser",text:"Revoyez vos coups et vos stats pour progresser."}],d=w([]),P=w(!1),m=w(!1),te=a=>{if(typeof window>"u")return[];try{const s=window.localStorage.getItem(a);return s?JSON.parse(s):[]}catch{return[]}},I=a=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem(a)==="1"}catch{return!1}},D=(a,s)=>{if(!(typeof window>"u"))try{window.localStorage.setItem(a,s)}catch{}},b=c(()=>new Date().toISOString().slice(0,10)),R=[{title:"Defi du jour",description:"Gagnez une partie rapide en moins de 15 coups.",cta:"Lancer un match",to:"/play"},{title:"Sprint tactique",description:"Enchainez 3 parties blitz pour monter en rythme.",cta:"Jouer blitz",to:"/play"},{title:"Focus ouverture",description:"Testez une nouvelle ouverture sur 2 parties.",cta:"Demarrer",to:"/play"}],T=[{title:"Puzzle rapide",description:"Mat en 2 coups.",solution:"1. Qxf7+ Kxf7 2. Bc4+"},{title:"Puzzle rapide",description:"Gagnez la dame en 2 coups.",solution:"1. Nd5! exd5 2. Qe7#"},{title:"Puzzle rapide",description:"Tactique de fourchette.",solution:"1. Nc7+ Kd8 2. Nxa8"}],se={title:"Defi du jour",description:"Gagnez une partie rapide en moins de 15 coups.",cta:"Lancer un match",to:"/play"},le={title:"Puzzle rapide",description:"Mat en 2 coups.",solution:"1. Qxf7+ Kxf7 2. Bc4+"},$=c(()=>{const a=Math.abs(Number(b.value.replace(/-/g,"")))%R.length;return R[a]??se}),N=c(()=>{const a=Math.abs(Number(b.value.replace(/-/g,"")))%T.length;return T[a]??le}),ae=c(()=>{const a=p.value.name&&p.value.name!=="Invite",s=f.value.length>0,t=d.value.includes("friend");return[{id:"profile",title:"Completer le profil",done:a||d.value.includes("profile"),to:"/profile"},{id:"match",title:"Jouer une partie",done:s||d.value.includes("match"),to:"/play"},{id:"friend",title:"Ajouter un ami",done:t,to:"/amis"}]}),oe=a=>{d.value.includes(a)?d.value=d.value.filter(s=>s!==a):d.value=[...d.value,a],D(J,JSON.stringify(d.value))},ne=()=>{P.value=!0,D(`${H}:${b.value}`,"1")},ie=()=>{m.value=!m.value,D(`${Q}:${b.value}`,m.value?"1":"0")},re=async()=>{if(typeof window>"u"||window.sessionStorage.getItem(U)||(window.sessionStorage.setItem(U,"1"),!xe()))return;const a=(await Ce()).find(s=>s.status==="en_cours");a&&await S.push(`/jeu/${a.id}`)};X(async()=>{u.value=await Pe(),typeof window<"u"&&!window.localStorage.getItem(G)&&(_.value=!0),d.value=te(J),P.value=I(`${H}:${b.value}`),m.value=I(`${Q}:${b.value}`),await re()});const K=()=>{_.value=!1};$e(_,(a,s)=>{s&&!a&&typeof window<"u"&&window.localStorage.setItem(G,"1")});const de=[{label:"Taux de victoire",value:"62%",change:"+4,2%",detail:"30 dernieres parties"},{label:"Precision moyenne",value:"88%",change:"+1,6%",detail:"Tendance saison"},{label:"Serie d'entrainement",value:"12 jours",change:"+3",detail:"Rythme actuel"},{label:"Taux de gaffes",value:"1,8%",change:"-0,4%",detail:"Plus bas = mieux"}],ce=[{label:"Evaluation",value:"+1,2",note:"Aux blancs de jouer"},{label:"Meilleure ligne",value:"e4 e5 Nf3",note:"Profondeur 3 demi-coups"},{label:"Menaces",value:"2 actives",note:"Securite du roi"}],ue=[24,46,38,62,48,70,56,44],q=De(),F=c(()=>Be(q.trend,520,180,20)),pe=[{title:"Sprint tactique",time:"11:00",length:"15 min"},{title:"Laboratoire d'ouverture",time:"14:30",length:"30 min"},{title:"Revue de finale",time:"19:00",length:"40 min"}],ve=[{name:"I. Alvarez",rating:2548,delta:"+12"},{name:"C. Russo",rating:2492,delta:"+8"},{name:"T. Holm",rating:2451,delta:"+5"},{name:"J. Park",rating:2422,delta:"+4"}],he={win:"Victoire",loss:"Defaite",draw:"Nul"},_e=["a","b","c","d","e","f","g","h"],me=[8,7,6,5,4,3,2,1],be={p:"♟",r:"♜",n:"♞",b:"♝",q:"♛",k:"♚",P:"♙",R:"♖",N:"♘",B:"♗",Q:"♕",K:"♔"},ge=[["r","n","b","q","k","b","n","r"],["p","p","p","","","p","p","p"],["","","","p","","","",""],["","","","","p","","",""],["","","P","","P","","",""],["","","","N","","N","",""],["P","P","","P","","P","P","P"],["R","","B","Q","K","B","","R"]],fe=new Set(["e2","e4"]),ye=me.flatMap((a,s)=>_e.map((t,y)=>{const k=ge[s]?.[y]??"",V=`${t}${a}`,ke=(s+y)%2===1,we=k?k===k.toUpperCase()?"light":"dark":"";return{id:V,dark:ke,piece:k,tone:we,symbol:be[k]??"",isLastMove:fe.has(V),isFocus:V===ns}}));return(a,s)=>(o(),Y(Le,{eyebrow:"Bon retour",title:A.value,subtitle:Z.value},{default:h(()=>[z(Te,{modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=t=>_.value=t),title:"Demarrage rapide"},{footer:h(()=>[e("button",{class:"button-ghost",type:"button",onClick:K},"Plus tard"),z(g(x),{class:"button-primary",to:"/play",onClick:K},{default:h(()=>[...s[2]||(s[2]=[C("Jouer maintenant",-1)])]),_:1})]),default:h(()=>[e("ol",Ke,[(o(),n(r,null,i(ee,t=>e("li",{key:t.title,class:"onboarding-step"},[e("p",qe,l(t.title),1),e("p",Fe,l(t.text),1)])),64))])]),_:1},8,["modelValue"]),e("section",Ee,[e("div",Oe,[e("div",Ge,[e("div",Je,[s[4]||(s[4]=e("div",null,[e("p",{class:"panel-title"},"Salle de match"),e("h2",{class:"panel-headline"},"Analyse en direct du plateau"),e("p",{class:"panel-sub"}," Suivez l'evaluation, les lignes candidates et la pression tactique d'un coup d'oeil. ")],-1)),e("div",He,[z(g(x),{class:"button-primary",to:"/play"},{default:h(()=>[...s[3]||(s[3]=[C("Nouvelle partie",-1)])]),_:1}),e("button",{class:"button-ghost",type:"button",onClick:s[1]||(s[1]=t=>_.value=!0)}," Mini tutoriel ")])]),e("div",Qe,[e("div",Ue,[(o(!0),n(r,null,i(g(ye),t=>(o(),n("div",{key:t.id,class:M(["square",t.dark?"square--dark":"square--light",t.isLastMove?"square--last":"",t.isFocus?"square--focus":""])},[t.piece?(o(),n("span",{key:0,class:M(["piece",t.tone==="light"?"piece--light":"piece--dark"])},l(t.symbol),3)):L("",!0)],2))),128))]),e("div",We,[(o(),n(r,null,i(ce,t=>e("div",{key:t.label,class:"metric-card"},[e("p",Xe,l(t.label),1),e("p",Ye,l(t.value),1),e("p",Ze,l(t.note),1)])),64)),e("div",et,[s[5]||(s[5]=e("div",{class:"engine-header"},[e("p",{class:"metric-label"},"Elan"),e("p",{class:"metric-value"},"68%")],-1)),e("div",tt,[(o(),n(r,null,i(ue,(t,y)=>e("span",{key:`bar-${y}`,class:"engine-bar",style:O({height:`${t}%`})},null,4)),64))]),s[6]||(s[6]=e("p",{class:"metric-note"},"Courbe sur les 8 derniers demi-coups",-1))])])])]),e("div",st,[(o(),n(r,null,i(de,t=>e("div",{key:t.label,class:"panel stat-card reveal delay-1"},[e("p",lt,l(t.label),1),e("p",at,l(t.value),1),e("div",ot,[e("span",nt,l(t.change),1),e("span",it,l(t.detail),1)])])),64))]),e("div",rt,[s[8]||(s[8]=e("div",{class:"panel-header"},[e("div",null,[e("p",{class:"panel-title"},"Analyse IA du profil"),e("h3",{class:"panel-headline"},"Vitesse de classement")]),e("button",{class:"range-pill",type:"button"},"Hebdomadaire")],-1)),(o(),n("svg",dt,[s[7]||(s[7]=e("defs",null,[e("linearGradient",{id:"trendLine",x1:"0",y1:"0",x2:"1",y2:"0"},[e("stop",{offset:"0%","stop-color":"var(--analysis-blue)"}),e("stop",{offset:"33%","stop-color":"var(--analysis-green)"}),e("stop",{offset:"66%","stop-color":"var(--analysis-red)"}),e("stop",{offset:"100%","stop-color":"var(--analysis-orange)"})]),e("linearGradient",{id:"trendFill",x1:"0",y1:"0",x2:"0",y2:"1"},[e("stop",{offset:"0%","stop-color":"var(--analysis-blue)","stop-opacity":"0.3"}),e("stop",{offset:"45%","stop-color":"var(--analysis-green)","stop-opacity":"0.22"}),e("stop",{offset:"75%","stop-color":"var(--analysis-red)","stop-opacity":"0.16"}),e("stop",{offset:"92%","stop-color":"var(--analysis-orange)","stop-opacity":"0.1"}),e("stop",{offset:"100%","stop-color":"var(--analysis-orange)","stop-opacity":"0"})])],-1)),e("path",{d:F.value.line,fill:"none",stroke:"url(#trendLine)","stroke-width":"3","stroke-linecap":"round"},null,8,ct),e("path",{d:F.value.area,fill:"url(#trendFill)"},null,8,ut)])),e("div",pt,[(o(!0),n(r,null,i(g(q).trendHighlights,t=>(o(),n("div",{key:t.label,class:"trend-item"},[e("p",vt,l(t.label),1),e("p",ht,l(t.value),1),e("p",_t,l(t.note),1)]))),128))])]),e("div",mt,[s[10]||(s[10]=e("div",{class:"panel-header"},[e("div",null,[e("p",{class:"panel-title"},"Parties recentes"),e("h3",{class:"panel-headline"},"Details des matchs")]),e("button",{class:"range-pill",type:"button"},"10 dernieres")],-1)),e("div",bt,[e("table",null,[s[9]||(s[9]=e("thead",null,[e("tr",null,[e("th",null,"Partie"),e("th",null,"Adversaire"),e("th",null,"Resultat"),e("th",null,"Ouverture"),e("th",null,"Coups"),e("th",null,"Precision")])],-1)),e("tbody",null,[(o(!0),n(r,null,i(f.value,t=>(o(),n("tr",{key:t.id},[e("td",null,l(t.id),1),e("td",null,l(t.opponent),1),e("td",null,[e("span",{class:M(["result-pill",`result--${t.result}`])},l(he[t.result]),3)]),e("td",null,l(t.opening),1),e("td",null,l(t.moves),1),e("td",null,l(t.accuracy)+"%",1)]))),128))])])])])]),e("aside",gt,[e("div",ft,[e("div",yt,[s[11]||(s[11]=e("p",{class:"panel-title"},"Score Elo",-1)),e("p",kt,l(p.value.location),1)]),e("div",wt,[s[13]||(s[13]=e("svg",{viewBox:"0 0 120 120","aria-hidden":"true"},[e("defs",null,[e("linearGradient",{id:"ratingGradient",x1:"0",y1:"0",x2:"1",y2:"1"},[e("stop",{offset:"0%","stop-color":"#4ade80"}),e("stop",{offset:"100%","stop-color":"#22c55e"})])]),e("circle",{cx:"60",cy:"60",r:"46",pathLength:"100",class:"ring-track"}),e("circle",{cx:"60",cy:"60",r:"46",pathLength:"100",class:"ring-value",stroke:"url(#ratingGradient)"})],-1)),e("div",zt,[e("p",St,l(p.value.rating),1),s[12]||(s[12]=e("p",{class:"ring-label"},"Classement rapide",-1))])]),e("div",Pt,[s[15]||(s[15]=e("div",null,[e("p",{class:"metric-label"},"Titre"),e("p",{class:"metric-value"},"Objectif MI")],-1)),e("div",null,[s[14]||(s[14]=e("p",{class:"metric-label"},"Derniere activite",-1)),e("p",$t,l(p.value.lastSeen),1)])])]),e("div",xt,[s[17]||(s[17]=e("div",{class:"panel-header"},[e("div",null,[e("p",{class:"panel-title"},"Checklist"),e("h3",{class:"panel-headline"},"Progres rapide")])],-1)),e("div",Ct,[(o(!0),n(r,null,i(ae.value,t=>(o(),n("div",{key:t.id,class:"onboarding-step checklist-step"},[e("div",Mt,[e("span",{class:M(["checklist-dot",t.done?"checklist-dot--done":""])},null,2),e("p",Lt,l(t.title),1)]),e("div",Bt,[z(g(x),{class:"button-ghost",to:t.to},{default:h(()=>[...s[16]||(s[16]=[C("Ouvrir",-1)])]),_:1},8,["to"]),e("button",{class:"button-ghost",type:"button",onClick:y=>oe(t.id)},l(t.done?"Annuler":"Terminer"),9,Dt)])]))),128))])]),e("div",Nt,[e("div",Vt,[e("div",null,[e("p",jt,l($.value.title),1),s[18]||(s[18]=e("h3",{class:"panel-headline"},"Objectif du jour",-1))])]),e("p",At,l($.value.description),1),e("div",It,[z(g(x),{class:"button-primary",to:$.value.to},{default:h(()=>[C(l($.value.cta),1)]),_:1},8,["to"]),e("button",{class:"button-ghost",type:"button",disabled:P.value,onClick:ne},l(P.value?"Valide":"Marquer termine"),9,Rt)])]),e("div",Tt,[e("div",Kt,[e("div",null,[e("p",qt,l(N.value.title),1),s[19]||(s[19]=e("h3",{class:"panel-headline"},"Puzzle rapide",-1))]),e("button",{class:"range-pill",type:"button",onClick:ie},l(m.value?"Masquer":"Voir solution"),1)]),e("p",Ft,l(N.value.description),1),m.value?(o(),n("p",Et,l(N.value.solution),1)):L("",!0)]),e("div",Ot,[s[20]||(s[20]=e("div",{class:"panel-header"},[e("div",null,[e("p",{class:"panel-title"},"Focus d'entrainement"),e("h3",{class:"panel-headline"},"Indicateurs de progression")]),e("button",{class:"range-pill",type:"button"},"Mensuel")],-1)),e("div",Gt,[(o(!0),n(r,null,i(v.value,t=>(o(),n("div",{key:t.label,class:"progress-item"},[e("div",Jt,[e("span",null,l(t.label),1),e("span",null,l(t.progress)+"%",1)]),e("div",Ht,[e("span",{class:"progress-fill",style:O({width:`${t.progress}%`})},null,4)])]))),128))])]),e("div",Qt,[s[21]||(s[21]=e("div",{class:"panel-header"},[e("div",null,[e("p",{class:"panel-title"},"Prochaines sessions"),e("h3",{class:"panel-headline"},"Plan du jour")]),e("button",{class:"range-pill",type:"button"},"Aujourd'hui")],-1)),e("div",Ut,[(o(),n(r,null,i(pe,t=>e("div",{key:t.title,class:"session-item"},[e("div",null,[e("p",Wt,l(t.title),1),e("p",Xt,l(t.time),1)]),e("span",Yt,l(t.length),1)])),64))])]),e("div",Zt,[s[22]||(s[22]=e("div",{class:"panel-header"},[e("div",null,[e("p",{class:"panel-title"},"Meilleurs joueurs"),e("h3",{class:"panel-headline"},"Elite du classement")]),e("button",{class:"range-pill",type:"button"},"Region")],-1)),e("div",es,[(o(),n(r,null,i(ve,t=>e("div",{key:t.name,class:"leaderboard-item"},[e("div",ts,[e("div",ss,l(t.name.slice(0,1)),1),e("div",null,[e("p",ls,l(t.name),1),e("p",as,"Elo "+l(t.rating),1)])]),e("span",os,l(t.delta),1)])),64))])])])])]),_:1},8,["title","subtitle"]))}});export{us as default};
