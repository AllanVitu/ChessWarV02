import{d as L,c as r,o as a,F as R,a as S,n as B,t as n,b as e,g as T,I as E,e as p,p as k,G as z,f as M,s as h,w as m,i as y,z as C,u as V,x as w,C as D,D as N}from"./vendor-vue-DHDwDR0M.js";import{_ as q}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-DWqoZ-Ld.js";import{g as F}from"./leaderboard-D_qe9d24.js";import"./index-C1qQ0MbN.js";import"./brand-icon-IDKxxvz3.js";const G={class:"segmented",role:"tablist"},P=["aria-selected","onClick"],U=L({__name:"AppTabs",props:{tabs:{},modelValue:{}},emits:["update:modelValue"],setup(v,{emit:i}){const l=v,u=i,c=d=>{d!==l.modelValue&&u("update:modelValue",d)};return(d,_)=>(a(),r("div",G,[(a(!0),r(R,null,S(l.tabs,o=>(a(),r("button",{key:o.id,class:B(["segmented-button",o.id===l.modelValue?"segmented-button--active":""]),role:"tab",type:"button","aria-selected":o.id===l.modelValue,onClick:f=>c(o.id)},n(o.label),11,P))),128))]))}}),W={class:"empty-state"},I={class:"empty-state__title"},J={key:0,class:"empty-state__subtitle"},$=L({__name:"EmptyState",props:{title:{default:"Aucune donnee"},subtitle:{default:""}},setup(v){const i=v;return(l,u)=>(a(),r("div",W,[e("p",I,n(i.title),1),i.subtitle?(a(),r("p",J,n(i.subtitle),1)):T("",!0),E(l.$slots,"default")]))}}),Q={class:"leaderboard-page"},H={class:"panel leaderboard-hero"},K={class:"leaderboard-cta"},O={class:"leaderboard-controls"},X={class:"search"},Y={class:"panel leaderboard-table"},Z={key:3,class:"leaderboard-table__body"},ee={class:"leaderboard-rank"},te={class:"leaderboard-player"},se={class:"leaderboard-avatar"},ae={class:"leaderboard-name"},le={class:"leaderboard-rating"},oe={class:"leaderboard-delta"},ne=10,pe=L({__name:"LeaderboardView",setup(v){const i=[{id:"global",label:"Global"},{id:"monthly",label:"Mensuel"},{id:"friends",label:"Amis"}],l=p("global"),u=p(""),c=p(1),d=p([]),_=p(!1),o=p(""),f=async()=>{_.value=!0,o.value="";try{d.value=await F(l.value,1,50)}catch(b){o.value=b.message,d.value=[]}finally{_.value=!1}},g=k(()=>{const b=d.value??[],t=u.value.trim().toLowerCase();return t?b.filter(s=>s.name.toLowerCase().includes(t)):b}),x=k(()=>g.value.slice(0,c.value*ne)),j=k(()=>x.value.length<g.value.length),A=()=>{u.value="",c.value=1};return z([l,u],()=>{c.value=1}),z(l,()=>{f()}),M(async()=>{await f()}),(b,t)=>(a(),h(q,{eyebrow:"Classement",title:"Tableau des meilleurs joueurs",subtitle:"Suivez votre position et lancez un match en un clic."},{default:m(()=>[e("section",Q,[e("div",H,[e("div",null,[t[5]||(t[5]=e("p",{class:"panel-title"},"Live ranking",-1)),t[6]||(t[6]=e("h2",{class:"panel-headline"},"Classement WarChess",-1)),t[7]||(t[7]=e("p",{class:"panel-sub"}," Comparez vos performances en temps reel et defiez les meilleurs. ",-1)),e("div",K,[y(V(w),{class:"button-primary",to:"/matchs"},{default:m(()=>[...t[3]||(t[3]=[C("Lancer un match",-1)])]),_:1}),y(V(w),{class:"button-ghost",to:"/profil/analyse"},{default:m(()=>[...t[4]||(t[4]=[C("Voir mon analyse",-1)])]),_:1})])]),e("div",O,[y(U,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),tabs:i},null,8,["modelValue"]),e("label",X,[t[8]||(t[8]=e("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[e("circle",{cx:"11",cy:"11",r:"7",stroke:"currentColor","stroke-width":"1.6",fill:"none"}),e("path",{d:"M16.5 16.5L21 21",stroke:"currentColor","stroke-width":"1.6","stroke-linecap":"round"})],-1)),D(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>u.value=s),type:"search",placeholder:"Rechercher un joueur","aria-label":"Rechercher un joueur"},null,512),[[N,u.value]])])])]),e("div",Y,[t[11]||(t[11]=e("div",{class:"leaderboard-table__header"},[e("span",null,"Rang"),e("span",null,"Joueur"),e("span",null,"Elo"),e("span",null,"Delta"),e("span")],-1)),_.value?(a(),h($,{key:0,title:"Chargement du classement",subtitle:"Synchronisation des statistiques en cours."})):o.value?(a(),h($,{key:1,title:"Classement indisponible",subtitle:o.value},{default:m(()=>[e("button",{class:"button-ghost",type:"button",onClick:f},"Reessayer")]),_:1},8,["subtitle"])):g.value.length?(a(),r("div",Z,[(a(!0),r(R,null,S(x.value,s=>(a(),r("div",{key:s.id,class:"leaderboard-row"},[e("span",ee,"#"+n(s.rank),1),e("div",te,[e("div",se,n(s.name.slice(0,1)),1),e("div",null,[e("p",ae,n(s.name),1),t[9]||(t[9]=e("p",{class:"leaderboard-meta"},"Equipe WarChess",-1))])]),e("span",le,n(s.rating),1),e("span",oe,n(s.delta>=0?"+":"")+n(s.delta),1),y(V(w),{class:"button-ghost",to:`/joueur/${s.id}`},{default:m(()=>[...t[10]||(t[10]=[C("Voir",-1)])]),_:1},8,["to"])]))),128)),j.value?(a(),r("button",{key:0,class:"button-ghost",type:"button",onClick:t[2]||(t[2]=s=>c.value+=1)}," Afficher plus ")):T("",!0)])):(a(),h($,{key:2,title:"Aucun joueur trouve",subtitle:"Essayez un autre filtre ou une recherche differente."},{default:m(()=>[e("button",{class:"button-ghost",type:"button",onClick:A},"Reinitialiser")]),_:1}))])])]),_:1}))}});export{pe as default};
