import{d as z,h as n,i as P,j as I,k as U,c as f,b as s,l as S,e as Y,t as u,m as T,p as E,v as X,q as $,x as G,a as V,w as A,u as L,R,s as O,n as H,f as J,o as y,g as D,y as _,z as K}from"./index-0n7ZVvpq.js";import{l as Q}from"./auth-NbawEJAF.js";const W={class:"auth-orbit"},Z={class:"panel auth-card auth-card--orbit"},ee={class:"auth-stack"},se={class:"auth-status"},te={class:"auth-status-count"},ae={class:"form-field"},oe={class:"form-field"},ne={class:"auth-input"},le=["type"],ie=["aria-pressed","aria-label"],re=["disabled","aria-busy"],ue={key:0,class:"auth-progress","aria-hidden":"true"},de={class:"auth-stat"},pe={class:"auth-stat-value"},ve={class:"auth-links"},fe=z({__name:"LoginView",setup(ce){const g=J(),p=n(""),v=n(""),l=n(!1),d=n(""),c=n(!1),i=n(!1),a=n(null),w=["53% de victoires sur les parties rapides.","Ouverture la plus jouee : Italienne.","Moyenne de 32 coups par partie.","Taux de precision moyen : 87%.","Meilleure serie recente : 4 victoires."],j=P(()=>{const t=new Date,e=t.getFullYear()+t.getMonth()*31+t.getDate();return w[e%w.length]}),q=P(()=>{const e=Math.sin(new Date().getHours()/24*Math.PI*2);return Math.round(140+e*35)});let o=0,m=0,h=0,b=!1;const x=()=>{o=0,a.value&&(a.value.style.setProperty("--parallax-x",`${m}px`),a.value.style.setProperty("--parallax-y",`${h}px`))},M=t=>{if(!a.value)return;const e=a.value.getBoundingClientRect(),r=(t.clientX-e.left)/e.width-.5,N=(t.clientY-e.top)/e.height-.5,C=24;m=r*C*2,h=N*C*2,o||(o=window.requestAnimationFrame(x))},k=()=>{m=0,h=0,o||(o=window.requestAnimationFrame(x))},B=async()=>{d.value="",c.value=!1,i.value=!0;const t=await Q(p.value,v.value);if(i.value=!1,d.value=t.message,c.value=!t.ok,t.ok){_("Connexion reussie",t.message),await g.push("/dashboard");return}t.message&&K("Connexion refusee",t.message)},F=async()=>{O(),H("Mode invite","Vous jouez en local sans compte."),await g.push("/dashboard")};return I(()=>{if(typeof window>"u")return;const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches,e=window.matchMedia("(pointer: fine)").matches;t||!e||a.value&&(b=!0,a.value.addEventListener("pointermove",M),a.value.addEventListener("pointerleave",k))}),U(()=>{o&&window.cancelAnimationFrame(o),b&&a.value&&(a.value.removeEventListener("pointermove",M),a.value.removeEventListener("pointerleave",k))}),(t,e)=>(y(),f("div",{ref_key:"authPageRef",ref:a,class:"auth-page auth-page--solo"},[e[18]||(e[18]=s("div",{class:"auth-wordmark","aria-hidden":"true"},null,-1)),e[19]||(e[19]=s("div",{class:"auth-silhouette auth-silhouette--pawn","aria-hidden":"true"},null,-1)),e[20]||(e[20]=s("div",{class:"auth-silhouette auth-silhouette--knight","aria-hidden":"true"},null,-1)),s("div",W,[e[17]||(e[17]=s("div",{class:"auth-halo","aria-hidden":"true"},null,-1)),s("div",Z,[s("div",ee,[e[12]||(e[12]=s("p",{class:"eyebrow"},"Connexion",-1)),e[13]||(e[13]=s("p",{class:"auth-kicker"},"Retour sur le plateau",-1)),e[14]||(e[14]=s("h1",{class:"auth-title"},"Reprendre votre partie",-1)),e[15]||(e[15]=s("p",{class:"subhead auth-subhead"}," Accedez a vos matchs en cours, vos invites d'amis et vos analyses. ",-1)),s("div",se,[e[3]||(e[3]=s("span",{class:"status-dot","aria-hidden":"true"},null,-1)),e[4]||(e[4]=s("span",null,"Serveur en ligne",-1)),s("span",te,u(q.value)+" joueurs actifs",1)]),s("form",{class:"form-stack auth-form",onSubmit:T(B,["prevent"])},[s("label",ae,[e[5]||(e[5]=s("span",{class:"form-label"},"Email",-1)),E(s("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>p.value=r),class:"form-input",type:"email",autocomplete:"email",inputmode:"email",placeholder:"vous@exemple.com"},null,512),[[X,p.value]])]),s("label",oe,[e[6]||(e[6]=s("span",{class:"form-label"},"Mot de passe",-1)),s("div",ne,[E(s("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>v.value=r),class:"form-input",type:l.value?"text":"password",autocomplete:"current-password",placeholder:"********"},null,8,le),[[$,v.value]]),s("button",{class:"auth-toggle",type:"button","aria-pressed":l.value,"aria-label":l.value?"Masquer le mot de passe":"Afficher le mot de passe",onClick:e[2]||(e[2]=r=>l.value=!l.value)},u(l.value?"Masquer":"Afficher"),9,ie)])]),s("button",{class:"button-primary",type:"submit",disabled:i.value,"aria-busy":i.value},u(i.value?"Connexion...":"Se connecter"),9,re),s("button",{class:"button-ghost",type:"button",onClick:F},"Jouer en invite"),i.value?(y(),f("div",ue,[...e[7]||(e[7]=[s("span",{class:"auth-progress__bar"},null,-1)])])):S("",!0),e[8]||(e[8]=s("p",{class:"auth-note"},"Connexion securisee et synchronisee sur tous vos appareils.",-1))],32),d.value?(y(),f("p",{key:0,class:G(["form-message",c.value?"form-message--error":"form-message--success"]),role:"status"},u(d.value),3)):S("",!0),s("div",de,[e[9]||(e[9]=s("span",{class:"auth-stat-label"},"Stat du jour",-1)),s("span",pe,u(j.value),1)]),e[16]||(e[16]=Y('<div class="auth-chips"><div class="auth-chip"><span class="auth-chip-dot auth-chip-dot--match"></span> Matchs amis </div><div class="auth-chip"><span class="auth-chip-dot auth-chip-dot--analysis"></span> Analyse IA </div><div class="auth-chip"><span class="auth-chip-dot auth-chip-dot--rank"></span> Classements </div></div>',1)),s("div",ve,[V(L(R),{to:"/mot-de-passe-oublie"},{default:A(()=>[...e[10]||(e[10]=[D("Mot de passe oublie ?",-1)])]),_:1}),V(L(R),{to:"/inscription"},{default:A(()=>[...e[11]||(e[11]=[D("Creer un compte",-1)])]),_:1})])])])])],512))}});export{fe as default};
