import{d as J,h as u,i as d,I as x,j as B,K as N,E as V,w as m,o as i,b as s,a as v,t as a,g as h,u as _,R as f,c as r,l as y,r as H,y as C,F as I,M as R}from"./index-vPvGcPAP.js";import{_ as T}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CrY_gPxS.js";import"./brand-icon-BJNb36kE.js";const $={class:"match-layout"},j={class:"panel match-create"},q={class:"panel-header"},P={class:"panel-actions"},D={class:"badge-soft"},F={class:"panel match-list"},S={class:"panel-header"},K={class:"panel-actions"},O=["disabled"],U={class:"match-cards"},G={key:0,class:"empty-state"},Q={class:"match-row"},W={class:"match-ident"},X={class:"match-avatar"},Y={class:"match-id"},Z={class:"match-opponent"},ss={class:"match-meta"},es={class:"match-footer"},ts={class:"match-move"},as={class:"match-actions"},os={class:"button-primary",type:"button"},ns=6,us=J({__name:"MatchListView",setup(is){const n=u([]),l=u(""),c=u(!1),M={planifie:"Planifie",en_cours:"En cours",termine:"Termine"},k=o=>{const e=o.trim();return e&&e.split(" ").filter(Boolean).slice(0,2).map(t=>t[0]?.toUpperCase()??"").join("")||"?"},L=o=>o==="planifie"?"Lancer":o==="en_cours"?"Reprendre":"Revoir",w=o=>"Ami",z=d(()=>n.value.length),b=d(()=>n.value.some(o=>o.status==="termine")),p=u(1),g=d(()=>n.value.slice(0,p.value*ns)),A=d(()=>g.value.length<n.value.length);x(n,()=>{p.value=1}),B(async()=>{n.value=await N()});const E=async()=>{if(l.value="",c.value=!1,!b.value){l.value="Aucun match termine a effacer.",c.value=!0;return}if(!window.confirm("Effacer l'historique des matchs termines ?"))return;const e=await R("history");n.value=e.matches,l.value=e.message,c.value=!e.ok};return(o,e)=>(i(),V(T,{eyebrow:"Matchs",title:"Centre des matchs",subtitle:"Creez, lancez et suivez vos parties en un seul endroit."},{default:m(()=>[s("section",$,[s("div",j,[s("div",q,[e[1]||(e[1]=s("div",null,[s("p",{class:"panel-title"},"Nouveau match"),s("h3",{class:"panel-headline"},"Configurer une partie")],-1)),s("div",P,[s("span",D,a(z.value)+" matchs",1)])]),e[3]||(e[3]=s("p",{class:"panel-sub"}," Les matchs IA et locaux sont desactives. Lancez une partie JcJ depuis l'onglet Amis. ",-1)),v(_(f),{class:"button-primary",to:"/amis"},{default:m(()=>[...e[2]||(e[2]=[h("Trouver un ami",-1)])]),_:1})]),s("div",F,[s("div",S,[e[4]||(e[4]=s("div",null,[s("p",{class:"panel-title"},"Liste des matchs"),s("h3",{class:"panel-headline"},"Historique et en cours")],-1)),s("div",K,[s("button",{class:"button-ghost",type:"button",disabled:!b.value,onClick:E}," Effacer l'historique ",8,O)])]),s("div",U,[n.value.length?y("",!0):(i(),r("div",G,[e[6]||(e[6]=s("p",{class:"empty-state__title"},"Aucun match JcJ pour le moment.",-1)),e[7]||(e[7]=s("p",{class:"empty-state__subtitle"},"Invitez un ami pour commencer.",-1)),v(_(f),{class:"button-primary",to:"/amis"},{default:m(()=>[...e[5]||(e[5]=[h("Trouver un ami",-1)])]),_:1})])),(i(!0),r(I,null,H(g.value,t=>(i(),r("article",{key:t.id,class:"match-card"},[s("div",Q,[s("div",W,[s("div",X,a(k(t.opponent)),1),s("div",null,[s("p",Y,a(t.id),1),s("p",Z,a(t.opponent),1)])]),s("span",{class:C(["match-status",`match-status--${t.status}`])},a(M[t.status]),3)]),s("div",ss,[s("span",null,a(w(t.mode)),1),s("span",null,"Cadence "+a(t.timeControl),1),s("span",null,a(t.side),1)]),s("div",es,[s("span",ts,"Dernier coup: "+a(t.lastMove),1),s("div",as,[v(_(f),{class:"button-ghost",to:`/jeu/${t.id}`},{default:m(()=>[...e[8]||(e[8]=[h("Ouvrir",-1)])]),_:1},8,["to"]),s("button",os,a(L(t.status)),1)])])]))),128)),A.value?(i(),r("button",{key:1,class:"button-ghost",type:"button",onClick:e[0]||(e[0]=t=>p.value+=1)}," Afficher plus ")):y("",!0)]),l.value?(i(),r("p",{key:0,class:C(["form-message",c.value?"form-message--error":"form-message--success"]),role:"status"},a(l.value),3)):y("",!0)])])]),_:1}))}});export{us as default};
