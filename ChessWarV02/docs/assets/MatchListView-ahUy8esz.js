import{d as A,h as u,i as p,j as x,G as J,A as z,w as d,o as l,b as s,a as h,t as a,g as _,u as v,R as f,c,l as y,r as B,x as b,F as E,H}from"./index-0n7ZVvpq.js";import{_ as N}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-D7JSpCOr.js";import"./brand-icon-CfIn26ur.js";import"./auth-NbawEJAF.js";const V={class:"match-layout"},R={class:"panel match-create"},j={class:"panel-header"},q={class:"panel-actions"},T={class:"badge-soft"},$={class:"panel match-list"},D={class:"panel-header"},F={class:"panel-actions"},I=["disabled"],G={class:"match-cards"},O={key:0,class:"empty-state"},P={class:"match-row"},S={class:"match-ident"},U={class:"match-avatar"},K={class:"match-id"},Q={class:"match-opponent"},W={class:"match-meta"},X={class:"match-footer"},Y={class:"match-move"},Z={class:"match-actions"},ss={class:"button-primary",type:"button"},is=A({__name:"MatchListView",setup(es){const n=u([]),i=u(""),r=u(!1),g={planifie:"Planifie",en_cours:"En cours",termine:"Termine"},C=o=>{const e=o.trim();return e&&e.split(" ").filter(Boolean).slice(0,2).map(t=>t[0]?.toUpperCase()??"").join("")||"?"},L=o=>o==="planifie"?"Lancer":o==="en_cours"?"Reprendre":"Revoir",k=o=>"Ami",w=p(()=>n.value.length),m=p(()=>n.value.some(o=>o.status==="termine"));x(async()=>{n.value=await J()});const M=async()=>{if(i.value="",r.value=!1,!m.value){i.value="Aucun match termine a effacer.",r.value=!0;return}if(!window.confirm("Effacer l'historique des matchs termines ?"))return;const e=await H("history");n.value=e.matches,i.value=e.message,r.value=!e.ok};return(o,e)=>(l(),z(N,{eyebrow:"Matchs",title:"Centre des matchs",subtitle:"Creez, lancez et suivez vos parties en un seul endroit."},{default:d(()=>[s("section",V,[s("div",R,[s("div",j,[e[0]||(e[0]=s("div",null,[s("p",{class:"panel-title"},"Nouveau match"),s("h3",{class:"panel-headline"},"Configurer une partie")],-1)),s("div",q,[s("span",T,a(w.value)+" matchs",1)])]),e[2]||(e[2]=s("p",{class:"panel-sub"}," Les matchs IA et locaux sont desactives. Lancez une partie JcJ depuis l'onglet Amis. ",-1)),h(v(f),{class:"button-primary",to:"/amis"},{default:d(()=>[...e[1]||(e[1]=[_("Trouver un ami",-1)])]),_:1})]),s("div",$,[s("div",D,[e[3]||(e[3]=s("div",null,[s("p",{class:"panel-title"},"Liste des matchs"),s("h3",{class:"panel-headline"},"Historique et en cours")],-1)),s("div",F,[s("button",{class:"button-ghost",type:"button",disabled:!m.value,onClick:M}," Effacer l'historique ",8,I)])]),s("div",G,[n.value.length?y("",!0):(l(),c("div",O,"Aucun match JcJ pour le moment.")),(l(!0),c(E,null,B(n.value,t=>(l(),c("article",{key:t.id,class:"match-card"},[s("div",P,[s("div",S,[s("div",U,a(C(t.opponent)),1),s("div",null,[s("p",K,a(t.id),1),s("p",Q,a(t.opponent),1)])]),s("span",{class:b(["match-status",`match-status--${t.status}`])},a(g[t.status]),3)]),s("div",W,[s("span",null,a(k(t.mode)),1),s("span",null,"Cadence "+a(t.timeControl),1),s("span",null,a(t.side),1)]),s("div",X,[s("span",Y,"Dernier coup: "+a(t.lastMove),1),s("div",Z,[h(v(f),{class:"button-ghost",to:`/jeu/${t.id}`},{default:d(()=>[...e[4]||(e[4]=[_("Ouvrir",-1)])]),_:1},8,["to"]),s("button",ss,a(L(t.status)),1)])])]))),128))]),i.value?(l(),c("p",{key:0,class:b(["form-message",r.value?"form-message--error":"form-message--success"]),role:"status"},a(i.value),3)):y("",!0)])])]),_:1}))}});export{is as default};
