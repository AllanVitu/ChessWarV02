import{_ as I}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CrY_gPxS.js";import{d as T,h as A,i as b,j as R,H as Z,E as J,w as K,o as n,b as e,c as o,r as v,t as a,u as y,F as h,y as Q,l as U,L as W}from"./index-vPvGcPAP.js";import{g as X}from"./profileAnalysis-D7ewrLEi.js";import"./brand-icon-BJNb36kE.js";const Y={class:"content-grid"},ee={class:"left-column"},se={class:"panel hero-card"},te={class:"stats-grid"},le={class:"stat-label"},ae={class:"stat-value"},ne={class:"stat-meta"},oe={class:"stat-change"},ie={class:"panel elo-panel"},re={class:"panel-header"},de={class:"segmented elo-periods"},ce=["onClick"],ue={class:"elo-chart"},pe=["viewBox"],ve=["d"],he=["d"],_e=["cx","cy"],me={class:"elo-range"},ge={class:"elo-metrics"},be={class:"metric-card"},ye={class:"metric-value"},fe={class:"metric-card"},ke={class:"metric-value"},xe={class:"metric-card"},$e={class:"metric-value"},Me={class:"period-metrics"},we={class:"metric-label"},Ae={class:"metric-value"},je={class:"metric-note"},Se={class:"panel"},Ce={class:"progress-list analysis-progress"},Pe={class:"progress-labels"},Ee={class:"progress-bar"},Be={class:"panel"},Le={class:"session-list"},De={class:"session-title"},Oe={class:"session-time"},Ve={class:"badge-soft"},Ge={class:"right-column"},Fe={class:"panel"},Ne={class:"session-list"},qe={class:"session-title"},ze={class:"session-time"},He={class:"badge-soft"},Ie={class:"panel"},Te={class:"hero-metrics"},Re={class:"metric-label"},Ze={class:"metric-value"},Je={class:"metric-note"},Ke={class:"panel leaderboard-card"},Qe={class:"leaderboard-list"},Ue={class:"leaderboard-user"},We={class:"leaderboard-avatar"},Xe={class:"leaderboard-name"},Ye={class:"leaderboard-meta"},es={class:"leaderboard-delta"},os=T({__name:"ProfileAnalysisView",setup(ss){const m=X(),j=A([]),S=A(1800),M=A("30j"),k=[{key:"7j",label:"7 jours",games:5},{key:"30j",label:"30 jours",games:12},{key:"90j",label:"90 jours",games:24}],B=k[1]??k[0]??{key:"30j",label:"30 jours",games:12},L=b(()=>k.find(l=>l.key===M.value)??B),C=b(()=>{const l=L.value.games;return j.value.slice(0,l).reverse()}),D=l=>l==="win"?18:l==="draw"?6:-12,O=(l,t)=>{if(!l.length)return[t-6,t];const s=l.map(c=>D(c.result));let r=t-s.reduce((c,g)=>c+g,0);const p=[r];for(const c of s)r+=c,p.push(r);return p},V=l=>{const r=l.length>1?l:[l[0]??0,l[0]??0],p=Math.min(...r),c=Math.max(...r),g=Math.max(1,c-p),d=r.length>1?484/(r.length-1):0,u=124,_=r.map((f,w)=>{const z=18+d*w,H=142-(f-p)/g*u;return{x:z,y:H,value:f}}),E=_.map((f,w)=>`${w===0?"M":"L"}${f.x} ${f.y}`).join(" "),N=_[_.length-1]??{x:18},q=`${E} L${N.x} 142 L18 142 Z`;return{width:520,height:160,line:E,area:q,points:_,min:p,max:c,start:r[0]??0,end:r[r.length-1]??0}},G=b(()=>O(C.value,S.value)),i=b(()=>V(G.value)),P=b(()=>{const l=i.value.points;return l[l.length-1]??{x:0,y:0}}),x=l=>Math.round(l).toString(),F=b(()=>{const l=C.value,t=l.length;if(!t)return[{label:"Matchs joues",value:"0",note:"Aucune partie"},{label:"Taux de victoire",value:"0%",note:"0 victoires"},{label:"Precision moyenne",value:"0%",note:"---"},{label:"Ouverture favorite",value:"---",note:"---"}];const s=l.filter(d=>d.result==="win").length,$=Math.round(s/t*100),r=Math.round(l.reduce((d,u)=>d+(u.accuracy??0),0)/t),p=Math.round(l.reduce((d,u)=>d+(u.moves??0),0)/t),c=l.reduce((d,u)=>{const _=u.opening||"Inconnue";return d[_]=(d[_]??0)+1,d},{}),g=Object.entries(c).sort((d,u)=>u[1]-d[1])[0]?.[0]??"---";return[{label:"Matchs joues",value:`${t}`,note:`${s} victoires`},{label:"Taux de victoire",value:`${$}%`,note:`Moyenne ${p} coups`},{label:"Precision moyenne",value:`${r}%`,note:"Sur ce segment"},{label:"Ouverture favorite",value:g,note:`${c[g]??0} parties`}]});return R(async()=>{const l=await Z();j.value=l.games??[],S.value=l.profile.rating??1800}),(l,t)=>(n(),J(I,{eyebrow:"Analyse",title:"Analyse du profil",subtitle:"Synthese de performance et tendances recentes."},{default:K(()=>[e("section",Y,[e("div",ee,[e("div",se,[t[0]||(t[0]=e("div",{class:"panel-header"},[e("div",null,[e("p",{class:"panel-title"},"Apercu general"),e("h2",{class:"panel-headline"},"Niveau et progression"),e("p",{class:"panel-sub"},"Suivi des stats cles sur vos 30 derniers matchs.")]),e("span",{class:"badge-soft"},"Semaine 02")],-1)),e("div",te,[(n(!0),o(h,null,v(y(m).keyMetrics,s=>(n(),o("div",{key:s.label,class:"panel stat-card"},[e("p",le,a(s.label),1),e("p",ae,a(s.value),1),e("div",ne,[e("span",oe,a(s.detail),1)])]))),128))])]),e("div",ie,[e("div",re,[t[1]||(t[1]=e("div",null,[e("p",{class:"panel-title"},"Courbe Elo"),e("h3",{class:"panel-headline"},"Evolution recente"),e("p",{class:"panel-sub"},"Basee sur vos derniers matchs.")],-1)),e("div",de,[(n(),o(h,null,v(k,s=>e("button",{key:s.key,type:"button",class:Q(["segmented-button",M.value===s.key&&"segmented-button--active"]),onClick:$=>M.value=s.key},a(s.label),11,ce)),64))])]),e("div",ue,[(n(),o("svg",{viewBox:`0 0 ${i.value.width} ${i.value.height}`,role:"img","aria-label":"Evolution de votre Elo"},[t[2]||(t[2]=e("defs",null,[e("linearGradient",{id:"eloGradient",x1:"0",y1:"0",x2:"0",y2:"1"},[e("stop",{offset:"0%","stop-color":"var(--halo-secondary-solid)","stop-opacity":"0.35"}),e("stop",{offset:"100%","stop-color":"var(--halo-secondary-solid)","stop-opacity":"0"})])],-1)),e("path",{class:"elo-area",d:i.value.area,fill:"url(#eloGradient)"},null,8,ve),e("path",{class:"elo-line",d:i.value.line},null,8,he),i.value.points.length?(n(),o("circle",{key:0,class:"elo-dot",cx:P.value.x,cy:P.value.y,r:"4"},null,8,_e)):U("",!0)],8,pe)),e("div",me,[e("span",null,a(x(i.value.min)),1),e("span",null,a(x(i.value.max)),1)])]),e("div",ge,[e("div",be,[t[3]||(t[3]=e("p",{class:"metric-label"},"Depart",-1)),e("p",ye,a(x(i.value.start)),1),t[4]||(t[4]=e("p",{class:"metric-note"},"Debut de periode",-1))]),e("div",fe,[t[5]||(t[5]=e("p",{class:"metric-label"},"Fin",-1)),e("p",ke,a(x(i.value.end)),1),t[6]||(t[6]=e("p",{class:"metric-note"},"Actuel",-1))]),e("div",xe,[t[7]||(t[7]=e("p",{class:"metric-label"},"Variation",-1)),e("p",$e,a(Math.round(i.value.end-i.value.start)>=0?"+":"")+a(Math.round(i.value.end-i.value.start)),1),t[8]||(t[8]=e("p",{class:"metric-note"},"Sur la periode",-1))])]),e("div",Me,[(n(!0),o(h,null,v(F.value,s=>(n(),o("div",{key:s.label,class:"metric-card"},[e("p",we,a(s.label),1),e("p",Ae,a(s.value),1),e("p",je,a(s.note),1)]))),128))])]),e("div",Se,[t[9]||(t[9]=e("div",{class:"panel-header"},[e("div",null,[e("p",{class:"panel-title"},"Axes prioritaires"),e("h3",{class:"panel-headline"},"Progression ciblee")]),e("button",{class:"range-pill",type:"button"},"Mensuel")],-1)),e("div",Ce,[(n(!0),o(h,null,v(y(m).focusAreas,s=>(n(),o("div",{key:s.label,class:"progress-item"},[e("div",Pe,[e("span",null,a(s.label),1),e("span",null,a(s.progress)+"%",1)]),e("div",Ee,[e("span",{class:"progress-fill",style:W({width:`${s.progress}%`})},null,4)])]))),128))])]),e("div",Be,[t[10]||(t[10]=e("div",{class:"panel-header"},[e("div",null,[e("p",{class:"panel-title"},"Moments forts"),e("h3",{class:"panel-headline"},"Ce qui fonctionne")])],-1)),e("div",Le,[(n(!0),o(h,null,v(y(m).highlights,s=>(n(),o("div",{key:s.title,class:"session-item"},[e("div",null,[e("p",De,a(s.title),1),e("p",Oe,a(s.detail),1)]),e("span",Ve,a(s.tag),1)]))),128))])])]),e("aside",Ge,[e("div",Fe,[t[11]||(t[11]=e("div",{class:"panel-header"},[e("div",null,[e("p",{class:"panel-title"},"Points d'alerte"),e("h3",{class:"panel-headline"},"A corriger")])],-1)),e("div",Ne,[(n(!0),o(h,null,v(y(m).alerts,s=>(n(),o("div",{key:s.title,class:"session-item"},[e("div",null,[e("p",qe,a(s.title),1),e("p",ze,a(s.detail),1)]),e("span",He,a(s.tag),1)]))),128))])]),e("div",Ie,[t[12]||(t[12]=e("div",{class:"panel-header"},[e("div",null,[e("p",{class:"panel-title"},"Analyse IA"),e("h3",{class:"panel-headline"},"Lecture automatique")])],-1)),e("div",Te,[(n(!0),o(h,null,v(y(m).aiSignals,s=>(n(),o("div",{key:s.label,class:"metric-card"},[e("p",Re,a(s.label),1),e("p",Ze,a(s.value),1),e("p",Je,a(s.note),1)]))),128))])]),e("div",Ke,[t[13]||(t[13]=e("div",{class:"panel-header"},[e("div",null,[e("p",{class:"panel-title"},"Adversaires cle"),e("h3",{class:"panel-headline"},"Styles a preparer")])],-1)),e("div",Qe,[(n(!0),o(h,null,v(y(m).rivals,s=>(n(),o("div",{key:s.name,class:"leaderboard-item"},[e("div",Ue,[e("div",We,a(s.name.slice(0,1)),1),e("div",null,[e("p",Xe,a(s.name),1),e("p",Ye,a(s.note),1)])]),e("span",es,a(s.delta),1)]))),128))])])])])]),_:1}))}});export{os as default};
