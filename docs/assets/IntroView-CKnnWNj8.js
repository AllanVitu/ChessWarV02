import{d as W,p as z,c as h,b as e,g as k,t as _,q as J,o as v,e as C,f as K,h as Z,s as Q,i as b,v as j,w as y,u as w,x as L,F as X,a as Y,y as ee,z as E}from"./vendor-vue-DHDwDR0M.js";import{l as D,_ as te}from"./brand-icon-IDKxxvz3.js";import{s as se,n as ne}from"./index-D5r2B9WW.js";const oe={class:"intro-loader",role:"status","aria-live":"polite"},ae={class:"intro-loader__panel"},re={class:"intro-loader__brand"},le={class:"intro-loader__title"},ie={class:"intro-loader__subtitle"},de={class:"intro-loader__progress"},ue={class:"intro-loader__bar"},ce={class:"intro-loader__meta"},pe={class:"intro-loader__stage"},ge={class:"intro-loader__percent"},ve={key:0,class:"intro-loader__current"},me={key:0,class:"intro-loader__slow"},he={class:"intro-loader__actions"},_e={key:1,class:"intro-loader__error"},fe={key:0,class:"intro-loader__detail"},be={class:"intro-loader__actions"},ye=W({__name:"IntroLoader",props:{title:{},subtitle:{},percent:{},stage:{},current:{},slow:{type:Boolean},error:{},showLightMode:{type:Boolean}},emits:["retry","light-mode","copy","back"],setup(u){const n=u,f=z(()=>n.error?"Erreur":n.stage==="ready"?"Pret !":n.stage==="compiling"?"Compilation...":n.stage==="downloading"?"Telechargement...":"Initialisation...");return(i,s)=>(v(),h("section",oe,[e("div",ae,[e("div",re,[s[6]||(s[6]=e("div",{class:"intro-loader__logo","aria-hidden":"true"},[e("span",null,"WC")],-1)),e("div",null,[e("h1",le,_(n.title),1),e("p",ie,_(n.subtitle),1)])]),e("div",de,[s[7]||(s[7]=e("div",{class:"intro-loader__spinner","aria-hidden":"true"},null,-1)),e("div",ue,[e("span",{class:"intro-loader__fill",style:J({width:`${n.percent}%`})},null,4)]),e("div",ce,[e("span",pe,_(f.value),1),e("span",ge,_(n.percent)+"%",1)]),n.current?(v(),h("p",ve,_(n.current),1)):k("",!0)]),n.slow&&!n.error?(v(),h("div",me,[s[8]||(s[8]=e("p",null,"Ca prend plus de temps que prevu...",-1)),e("div",he,[e("button",{class:"button-primary",type:"button",onClick:s[0]||(s[0]=o=>i.$emit("retry"))},"Reessayer"),n.showLightMode?(v(),h("button",{key:0,class:"button-ghost",type:"button",onClick:s[1]||(s[1]=o=>i.$emit("light-mode"))}," Continuer en mode leger ")):k("",!0)])])):k("",!0),n.error?(v(),h("div",_e,[e("h2",null,_(n.error.code),1),e("p",null,_(n.error.message),1),n.error.detail?(v(),h("p",fe,_(n.error.detail),1)):k("",!0),e("div",be,[e("button",{class:"button-primary",type:"button",onClick:s[2]||(s[2]=o=>i.$emit("retry"))},"Reessayer"),n.showLightMode?(v(),h("button",{key:0,class:"button-ghost",type:"button",onClick:s[3]||(s[3]=o=>i.$emit("light-mode"))}," Continuer en mode leger ")):k("",!0),e("button",{class:"button-ghost",type:"button",onClick:s[4]||(s[4]=o=>i.$emit("copy"))},"Copier les details"),e("button",{class:"button-outline",type:"button",onClick:s[5]||(s[5]=o=>i.$emit("back"))},"Retour a l'accueil")])])):k("",!0)])]))}}),we=""+new URL("brand-wordmark-iZNL4rmZ.png",import.meta.url).href,ke=u=>Math.max(0,Math.min(100,Math.round(u))),N=(u,n,f)=>({ok:!1,error:u instanceof Error?u:new Error(String(u)),code:n,detail:f}),Ce=async(u,{signal:n,onProgress:f}={})=>{const i=u.reduce((a,d)=>a+(d.weight??1),0)||1;let s=0;const o=(a,d,c=0)=>{const l=ke((s+c)/i*100);f?.({loaded:Math.round(s+c),total:Math.round(i),percent:l,stage:a,current:d})};o("initializing");try{for(const a of u){if(n?.aborted)return N(new Error("Chargement interrompu."),"ABORTED");const d=a.weight??1;let c=0;o("downloading",a.label??a.url);const l=await fetch(a.url,{cache:"force-cache",signal:n});if(!l.ok){if(a.optional){s+=d;continue}return N(new Error(`Asset ${l.status}: ${a.url}`),"ASSET_404",a.url)}if(l.body&&l.headers.has("content-length")){const p=Number(l.headers.get("content-length"))||0;if(p>0){const $=l.body.getReader();let A=0;for(;;){const{done:B,value:T}=await $.read();if(B)break;T&&(A+=T.length,c=Math.min(A/p,1)*d,o("downloading",a.label??a.url,c))}}else await l.arrayBuffer()}else await l.arrayBuffer();s+=d,o("downloading",a.label??a.url)}return o("compiling"),await new Promise(a=>setTimeout(a,250)),o("ready"),{ok:!0}}catch(a){return a?.name==="AbortError"?N(a,"ABORTED"):N(a,"UNKNOWN")}},Le={key:1,class:"landing-page"},Ee={class:"landing-hero"},$e={class:"landing-copy"},Te={class:"landing-actions"},Ae={class:"landing-visual"},Me={class:"landing-visual__card"},Re={class:"landing-visual__grid","aria-hidden":"true"},Ne={class:"landing-cta"},ze={class:"landing-actions"},Be={class:"landing-footer"},Ie={class:"landing-footer__links"},We=W({__name:"IntroView",setup(u){const n=ee(),f=[{label:"Matchs",to:"/matchs"},{label:"Classement",to:"/leaderboard"},{label:"Connexion",to:"/auth"}],i=C({loaded:0,total:1,percent:0,stage:"initializing"}),s=C(!1),o=C(null),a=C(!1),d=C(0),c=C(!1);let l=null,p=null,$=null;const A=z(()=>[{url:D,label:"Logo principal",weight:1},{url:we,label:"Wordmark",weight:1,heavy:!0},{url:"./android-chrome-512x512.png",label:"Icone HD",weight:1,heavy:!0}]),B=z(()=>!c.value),T=z(()=>!a.value&&!o.value),I=r=>r.includes("ChunkLoadError")||r.includes("Failed to fetch dynamically imported module"),U=()=>{try{const r=document.createElement("canvas");return!!(r.getContext("webgl")||r.getContext("experimental-webgl"))}catch{return!1}},x=r=>{if(r.ok)return null;const t=r.error.message||"Une erreur est survenue.",g=[r.detail,r.error.stack].filter(Boolean).join(`
`);return{code:r.code,message:t,detail:g||void 0}},M=async()=>{p&&p.abort(),p=new AbortController,o.value=null,a.value=!1,s.value=!1,i.value={loaded:0,total:1,percent:0,stage:"initializing"},l&&clearTimeout(l),l=setTimeout(()=>{s.value=!0},1e4);const r=A.value.filter(m=>c.value?!m.heavy:!0),t=await Ce(r,{signal:p.signal,onProgress:m=>{i.value=m}});if(l&&(clearTimeout(l),l=null),t.ok){a.value=!0,i.value={...i.value,stage:"ready",percent:100};return}if((t.error.message?I(t.error.message):!1)&&d.value<1){d.value+=1,$=setTimeout(()=>{M()},1e3);return}o.value=x(t)},P=async()=>{se(),ne("Mode invite","Vous jouez en local sans compte."),await n.push("/dashboard")},V=()=>{d.value=0,M()},O=()=>{c.value=!0,typeof window<"u"&&(window.localStorage.setItem("warchess.lightMode","1"),document.documentElement.classList.add("ui-simple")),d.value=0,M()},q=async()=>{if(!o.value)return;const r=[`code: ${o.value.code}`,`message: ${o.value.message}`,o.value.detail?`detail: ${o.value.detail}`:"",`userAgent: ${navigator.userAgent}`].filter(Boolean).join(`
`);try{await navigator.clipboard.writeText(r)}catch{}},F=async()=>{await n.push("/intro")},H=()=>{const r=g=>{if(!T.value)return;const m=g.message||"Erreur inconnue.",R=I(m)?"CHUNK_LOAD_FAILED":"RUNTIME_ERROR";o.value={code:R,message:m,detail:g.error?.stack},p?.abort()},t=g=>{if(!T.value)return;const m=g.reason instanceof Error?g.reason:new Error(String(g.reason)),R=m.message||"Promesse rejetee.",G=I(R)?"CHUNK_LOAD_FAILED":"UNHANDLED_REJECTION";o.value={code:G,message:R,detail:m.stack},p?.abort()};return window.addEventListener("error",r),window.addEventListener("unhandledrejection",t),()=>{window.removeEventListener("error",r),window.removeEventListener("unhandledrejection",t)}};let S=null;return K(()=>{if(S=H(),typeof window<"u"&&(window.localStorage.getItem("warchess.lightMode")==="1"?(c.value=!0,document.documentElement.classList.add("ui-simple")):document.documentElement.classList.remove("ui-simple")),!U()&&!c.value){o.value={code:"WEBGL_UNSUPPORTED",message:"Votre navigateur ne supporte pas WebGL.",detail:"Activez l acceleration materielle ou passez en mode leger."},s.value=!0;return}M()}),Z(()=>{l&&clearTimeout(l),$&&clearTimeout($),p&&p.abort(),S&&S()}),(r,t)=>!a.value||o.value?(v(),Q(ye,{key:0,title:"WarChess",subtitle:"Chargement de l'arene...",percent:i.value.percent,stage:i.value.stage,current:i.value.current,slow:s.value,error:o.value,"show-light-mode":B.value,onRetry:V,onLightMode:O,onCopy:q,onBack:F},null,8,["percent","stage","current","slow","error","show-light-mode"])):(v(),h("section",Le,[b(te,{items:f,"brand-label":"WarChess","brand-logo":w(D)},{actions:y(()=>[e("button",{class:"button-ghost landing-guest",type:"button",onClick:P}," Jouer en invite ")]),_:1},8,["brand-logo"]),e("div",Ee,[e("div",$e,[t[2]||(t[2]=e("p",{class:"eyebrow"},"Nouvelle generation",-1)),t[3]||(t[3]=e("h1",{class:"landing-title"},"WarChess",-1)),t[4]||(t[4]=e("p",{class:"landing-subtitle"}," L'arene d'echecs premium pour jouer, progresser et analyser en quelques minutes. ",-1)),e("div",Te,[b(w(L),{class:"button-primary",to:"/matchs"},{default:y(()=>[...t[0]||(t[0]=[E("Lancer un match",-1)])]),_:1}),b(w(L),{class:"button-ghost",to:"/help"},{default:y(()=>[...t[1]||(t[1]=[E("Voir les regles (2 min)",-1)])]),_:1})]),t[5]||(t[5]=j('<div class="landing-proof"><div class="landing-proof__item"><p class="landing-proof__value">12 480</p><p class="landing-proof__label">parties jouees</p></div><div class="landing-proof__item"><p class="landing-proof__value">2 min</p><p class="landing-proof__label">pour demarrer</p></div><div class="landing-proof__item"><p class="landing-proof__value">4.9/5</p><p class="landing-proof__label">satisfaction</p></div></div>',1))]),e("div",Ae,[e("div",Me,[t[6]||(t[6]=e("p",{class:"panel-title"},"Live arena",-1)),t[7]||(t[7]=e("h2",{class:"panel-headline"},"Match express",-1)),t[8]||(t[8]=e("p",{class:"panel-sub"}," Tableau fluide, reponse immediate, analyse legere et immersive. ",-1)),e("div",Re,[(v(),h(X,null,Y(16,g=>e("span",{key:g,class:"landing-visual__tile"})),64))])]),t[9]||(t[9]=j('<div class="landing-visual__stats"><div class="stat-chip"><p class="stat-chip-label">Elo moyen</p><p class="stat-chip-value">1640</p></div><div class="stat-chip"><p class="stat-chip-label">Temps moyen</p><p class="stat-chip-value">12 min</p></div><div class="stat-chip"><p class="stat-chip-label">Analyse IA</p><p class="stat-chip-value">Temps reel</p></div></div>',1))])]),t[16]||(t[16]=j('<section class="landing-features"><div class="landing-section"><p class="eyebrow">Fonctionnalites</p><h2 class="landing-section__title">Tout pour jouer et progresser</h2></div><div class="landing-cards"><article class="feature-card"><h3>Parties rapides</h3><p>Lancez un match en quelques secondes avec des cadences adaptees.</p></article><article class="feature-card"><h3>Classement vivant</h3><p>Suivez votre progression et comparez-vous a vos amis.</p></article><article class="feature-card"><h3>Progression &amp; analyse</h3><p>Statistiques claires, revues de parties et objectifs hebdo.</p></article></div></section><section class="landing-onboarding"><div class="landing-section"><p class="eyebrow">Demarrage</p><h2 class="landing-section__title">3 etapes pour entrer dans l&#39;arene</h2></div><ol class="landing-steps"><li><span class="landing-step__count">01</span><div><h3>Choisir un mode</h3><p>Invite, classe ou local selon votre rythme du jour.</p></div></li><li><span class="landing-step__count">02</span><div><h3>Jouer la partie</h3><p>Interface rapide, feedback instantane, controle total.</p></div></li><li><span class="landing-step__count">03</span><div><h3>Analyser</h3><p>Revoyez vos coups, detectez les patterns, progressez.</p></div></li></ol></section>',2)),e("section",Ne,[t[12]||(t[12]=e("div",null,[e("p",{class:"eyebrow"},"Pret a jouer"),e("h2",{class:"landing-section__title"},"Decouvrez votre meilleur niveau."),e("p",{class:"landing-section__text"}," Lancez une partie maintenant ou consultez les regles en 2 minutes. ")],-1)),e("div",ze,[b(w(L),{class:"button-primary",to:"/matchs"},{default:y(()=>[...t[10]||(t[10]=[E("Lancer un match",-1)])]),_:1}),b(w(L),{class:"button-ghost",to:"/help"},{default:y(()=>[...t[11]||(t[11]=[E("Voir les regles",-1)])]),_:1})])]),e("footer",Be,[t[15]||(t[15]=e("p",null,"WarChess - Arena chess experience",-1)),e("div",Ie,[b(w(L),{to:"/help"},{default:y(()=>[...t[13]||(t[13]=[E("Aide",-1)])]),_:1}),b(w(L),{to:"/auth"},{default:y(()=>[...t[14]||(t[14]=[E("Connexion",-1)])]),_:1})])])]))}});export{We as default};
