import{d as b,p as i,A as f,e as C,s as y,w as c,o as g,b as t,t as s,i as w,z as S,u as k,x as R,y as x}from"./vendor-vue-DHDwDR0M.js";import{_ as L}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CAFU19Jj.js";import{a as N,g as V,s as A,m as B}from"./story-NDRLUkJb.js";import"./index-D5r2B9WW.js";import"./brand-icon-IDKxxvz3.js";const I={class:"content-grid"},P={class:"left-column"},j={class:"panel hero-card"},D={class:"panel-header"},H={class:"panel-title"},T={class:"panel-headline"},U={class:"panel-sub"},$={class:"badge-soft"},q={class:"hero-metrics"},z={class:"metric-card"},M={class:"metric-value"},O={class:"metric-note"},E={class:"metric-card"},F={class:"metric-value"},G={class:"metric-note"},J={class:"card-actions"},K=["disabled"],Q=["disabled"],se=b({__name:"StoryChapterView",setup(W){const n=f(),u=x(),d=N(),p=i(()=>Number.parseInt(String(n.params.id??"0"),10)),e=i(()=>d.find(o=>o.id===p.value)??null),l=C(V()),r=i(()=>e.value?e.value.id===1?!0:l.value.completed.includes(e.value.id-1):!1),m=i(()=>e.value&&l.value.completed.includes(e.value.id)),v=()=>{try{window.sessionStorage.setItem("warchess.play.access","1")}catch{}},h=async()=>{if(!e.value||!r.value)return;v(),A(e.value.id);const o=new URLSearchParams({allow:"1",mode:"histoire",chapter:String(e.value.id),difficulty:e.value.difficulty.toLowerCase(),side:e.value.side,time:e.value.timeControl});await u.push(`/play?${o.toString()}`)},_=()=>{e.value&&(l.value.completed=B(e.value.id))};return(o,a)=>(g(),y(L,{eyebrow:"Histoire",title:e.value?e.value.title:"Chapitre",subtitle:"Detail du chapitre",breadcrumbs:[{label:"Histoire",to:"/histoire"},{label:e.value?.title||"Chapitre"}]},{default:c(()=>[t("section",I,[t("div",P,[t("div",j,[t("div",D,[t("div",null,[t("p",H,"Chapitre "+s(e.value?.id),1),t("h2",T,s(e.value?.title),1),t("p",U,s(e.value?.summary),1)]),t("span",$,s(e.value?.difficulty),1)]),t("div",q,[t("div",z,[a[0]||(a[0]=t("p",{class:"metric-label"},"Objectif",-1)),t("p",M,s(e.value?.objective),1),t("p",O,"Recompense "+s(e.value?.reward),1)]),t("div",E,[a[1]||(a[1]=t("p",{class:"metric-label"},"Cadence",-1)),t("p",F,s(e.value?.timeControl),1),t("p",G,"Couleur "+s(e.value?.side),1)])]),t("div",J,[t("button",{class:"button-primary",type:"button",disabled:!r.value,onClick:h}," Lancer le chapitre ",8,K),t("button",{class:"button-ghost",type:"button",disabled:!r.value,onClick:_},s(m.value?"Termine":"Marquer termine"),9,Q),w(k(R),{class:"button-ghost",to:"/histoire"},{default:c(()=>[...a[2]||(a[2]=[S("Retour",-1)])]),_:1})])])])])]),_:1},8,["title","breadcrumbs"]))}});export{se as default};
