import{d as k,e as z,p as S,s as P,w as c,o as u,b as t,i as h,t as a,z as b,u as p,x as f,c as C,a as L,n as $,F as q,y as x}from"./vendor-vue-DHDwDR0M.js";import{_ as A}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CAFU19Jj.js";import{g as R,a as V,s as B,m as D}from"./story-NDRLUkJb.js";import{g as N}from"./puzzles-C5G97RSN.js";import"./index-D5r2B9WW.js";import"./brand-icon-IDKxxvz3.js";const U={class:"story-layout"},j={class:"panel story-hero"},F={class:"story-hero__actions"},E=["disabled"],H={class:"story-grid"},I={class:"story-card__header"},M={class:"panel-title"},O={class:"panel-headline"},T={class:"panel-sub"},G={class:"story-meta"},J={class:"story-pill"},K={class:"story-pill"},Q={class:"story-pill"},W={class:"card-actions"},X=["disabled","onClick"],Y=["disabled","onClick"],nt=k({__name:"StoryView",setup(Z){const m=x(),n=V(),g=N(),l=z(R()),i=o=>o===1?!0:l.value.completed.includes(o-1),r=S(()=>n.find(o=>i(o.id)&&!l.value.completed.includes(o.id))??n[0]),_=()=>{try{window.sessionStorage.setItem("warchess.play.access","1")}catch{}},y=async o=>{const e=n.find(d=>d.id===o);if(!e||!i(e.id))return;_(),B(e.id);const s=new URLSearchParams({allow:"1",mode:"histoire",chapter:String(e.id),difficulty:e.difficulty.toLowerCase(),side:e.side,time:e.timeControl});await m.push(`/play?${s.toString()}`)},v=async()=>{_();const o=new URLSearchParams({allow:"1",mode:"local",puzzle:g.id,side:"Aleatoire",time:"10+0"});await m.push(`/play?${o.toString()}`)},w=o=>{l.value.completed=D(o)};return(o,e)=>(u(),P(A,{eyebrow:"Histoire",title:"Chronique des royaumes",subtitle:"Avancez chapitre par chapitre avec un cap tactique clair."},{default:c(()=>[t("section",U,[t("article",j,[e[2]||(e[2]=t("div",null,[t("p",{class:"panel-title"},"Campagne"),t("h2",{class:"panel-headline"},"La chronique du royaume"),t("p",{class:"panel-sub"}," Chaque chapitre propose un objectif concret, une cadence adaptee et une progression sauvegardee. ")],-1)),t("div",F,[t("button",{class:"button-primary",type:"button",disabled:!r.value,onClick:e[0]||(e[0]=s=>r.value&&y(r.value.id))}," Continuer chapitre "+a(r.value?.id??1),9,E),t("button",{class:"button-ghost",type:"button",onClick:v}," Puzzle du jour "),h(p(f),{class:"button-ghost",to:"/matchs"},{default:c(()=>[...e[1]||(e[1]=[b("Retour a l arena",-1)])]),_:1})])]),t("div",H,[(u(!0),C(q,null,L(p(n),s=>(u(),C("article",{key:s.id,class:"panel story-card"},[t("div",I,[t("p",M,"Chapitre "+a(s.id),1),t("span",{class:$(["badge-soft",i(s.id)?"":"badge-soft--muted"])},a(i(s.id)?"Ouvert":"Verrouille"),3)]),t("h3",O,a(s.title),1),t("p",T,a(s.summary),1),t("div",G,[t("span",J,"IA "+a(s.difficulty),1),t("span",K,"Cadence "+a(s.timeControl),1),t("span",Q,"Couleur "+a(s.side),1)]),t("div",W,[t("button",{class:"button-primary",type:"button",disabled:!i(s.id),onClick:d=>y(s.id)}," Lancer ",8,X),h(p(f),{class:"button-ghost",to:`/histoire/${s.id}`},{default:c(()=>[...e[3]||(e[3]=[b("Details",-1)])]),_:1},8,["to"]),t("button",{class:"button-ghost",type:"button",disabled:!i(s.id),onClick:d=>w(s.id)}," Marquer termine ",8,Y)])]))),128))])])]),_:1}))}});export{nt as default};
