import{d as v,e as k,p as w,s as S,w as c,o as u,b as s,i as _,t as a,z as y,u as p,x as h,c as b,a as x,n as L,F as $,y as V}from"./vendor-vue-DHDwDR0M.js";import{_ as q}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-DWqoZ-Ld.js";import{g as B,a as P,s as R,m as z}from"./story-NDRLUkJb.js";import"./index-C1qQ0MbN.js";import"./brand-icon-IDKxxvz3.js";const A={class:"story-layout"},D={class:"panel story-hero"},N={class:"story-hero__actions"},F=["disabled"],M={class:"story-grid"},U={class:"story-card__header"},j={class:"panel-title"},E={class:"panel-headline"},H={class:"panel-sub"},I={class:"story-meta"},T={class:"story-pill"},G={class:"story-pill"},J={class:"story-pill"},K={class:"card-actions"},O=["disabled","onClick"],Q=["disabled","onClick"],es=v({__name:"StoryView",setup(W){const f=V(),n=P(),l=k(B()),i=o=>o===1?!0:l.value.completed.includes(o-1),r=w(()=>n.find(o=>i(o.id)&&!l.value.completed.includes(o.id))??n[0]),C=()=>{try{window.sessionStorage.setItem("warchess.play.access","1")}catch{}},m=async o=>{const e=n.find(d=>d.id===o);if(!e||!i(e.id))return;C(),R(e.id);const t=new URLSearchParams({allow:"1",mode:"histoire",chapter:String(e.id),difficulty:e.difficulty.toLowerCase(),side:e.side,time:e.timeControl});await f.push(`/play?${t.toString()}`)},g=o=>{l.value.completed=z(o)};return(o,e)=>(u(),S(q,{eyebrow:"Histoire",title:"Mode histoire",subtitle:"Progressez chapitre par chapitre dans une campagne dynamique."},{default:c(()=>[s("section",A,[s("article",D,[e[2]||(e[2]=s("div",null,[s("p",{class:"panel-title"},"Campagne"),s("h2",{class:"panel-headline"},"La chronique du royaume"),s("p",{class:"panel-sub"}," Chaque chapitre propose un objectif concret, une cadence adaptee et une progression sauvegardee. ")],-1)),s("div",N,[s("button",{class:"button-primary",type:"button",disabled:!r.value,onClick:e[0]||(e[0]=t=>r.value&&m(r.value.id))}," Continuer chapitre "+a(r.value?.id??1),9,F),_(p(h),{class:"button-ghost",to:"/matchs"},{default:c(()=>[...e[1]||(e[1]=[y("Retour aux matchs",-1)])]),_:1})])]),s("div",M,[(u(!0),b($,null,x(p(n),t=>(u(),b("article",{key:t.id,class:"panel story-card"},[s("div",U,[s("p",j,"Chapitre "+a(t.id),1),s("span",{class:L(["badge-soft",i(t.id)?"":"badge-soft--muted"])},a(i(t.id)?"Disponible":"Verrouille"),3)]),s("h3",E,a(t.title),1),s("p",H,a(t.summary),1),s("div",I,[s("span",T,"IA "+a(t.difficulty),1),s("span",G,"Cadence "+a(t.timeControl),1),s("span",J,"Couleur "+a(t.side),1)]),s("div",K,[s("button",{class:"button-primary",type:"button",disabled:!i(t.id),onClick:d=>m(t.id)}," Lancer ",8,O),_(p(h),{class:"button-ghost",to:`/histoire/${t.id}`},{default:c(()=>[...e[3]||(e[3]=[y("Details",-1)])]),_:1},8,["to"]),s("button",{class:"button-ghost",type:"button",disabled:!i(t.id),onClick:d=>g(t.id)}," Marquer termine ",8,Q)])]))),128))])])]),_:1}))}});export{es as default};
