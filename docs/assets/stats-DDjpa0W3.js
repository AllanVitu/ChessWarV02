const c=n=>{if(!n)return 0;const e=new Date(n).getTime();return Number.isFinite(e)?e:0},h=(n,e)=>{const o=Date.now(),i=Math.max(1,e)*24*60*60*1e3;return n.filter(r=>{const s=c(r.finishedAt??r.createdAt);return s>0&&o-s<=i})},w=n=>{const e=n.filter(t=>t.status==="finished"||t.result),o=e.filter(t=>t.result==="win").length,i=e.filter(t=>t.result==="loss").length,r=e.filter(t=>t.result==="draw").length,s=e.length,l=s?Math.round(o/s*100):0,f=e.reduce((t,a)=>t+(a.eloDelta??0),0),u=[...e].sort((t,a)=>c(a.finishedAt??a.createdAt)-c(t.finishedAt??t.createdAt));let d=0;for(const t of u){if(t.result!=="win")break;d+=1}return{total:s,wins:o,losses:i,draws:r,winRate:l,totalEloDelta:f,streak:d}},A=(n,e)=>{const o=[...n].sort((s,l)=>c(s.finishedAt??s.createdAt)-c(l.finishedAt??l.createdAt)),i=[];let r=e;for(const s of o)r+=s.eloDelta??0,i.push(r);return i};export{A as b,h as f,w as s};
